#!/bin/bash

source /ext3/env.sh
conda activate diffdock-pocket
cd /scratch/projects/yzlab/group/kinase_eric/kinase_location_classifier/jeg10045_kinase_scripts/diffdock/DiffDock

python -m finetune_train --sampling_alpha 1 --sampling_beta 1 --cudnn_benchmark --cb_inference_freq 5 --num_inference_complexes 1000 --n_epochs 10 --inference_samples 8 --pdbbind_esm_embeddings_path /vast/eac709/allo_crossdock/DiffDock-L/AlloSet/241120/data/esm2 --pdbbind_dir data/allosteric_dataset/ --protein_file protein --ligand_file ligand --split_train allo_train_split.txt --split_val allo_test_split.txt --confidence_cutoff -4 --pretrain_ckpt best_ema_inference_epoch_model --pretrain_dir allo_only_score_model/allo-only --filtering_ckpt best_model_epoch75.pt --filtering_model_dir workdir/v1.1/confidence_model --max_complexes_per_couple 20 --cb_cluster "Allosteric Kinase Inhibitors" --initial_iterations 1 --minimum_t 0 --cache_path data/cache --inference_batch_size 4 --save_model_freq 1 --inference_iterations 1 --buffer_sampling_alpha 2 --buffer_sampling_beta 1 --wandb --project diffdock-tune --run_name cb_test --num_inference_complexes 1000 --chain_cutoff 10 --num_workers=2
#python -m finetune_train --sampling_alpha 1 --sampling_beta 1 --cudnn_benchmark --cb_inference_freq 5 --num_inference_complexes 1000 --n_epochs 10 --inference_samples 8 --pdbbind_esm_embeddings_path /vast/eac709/allo_crossdock/DiffDock-L/AlloSet/241120/data/esm2 --pdbbind_dir data/allosteric_dataset/ --protein_file protein --ligand_file ligand --split_train debug_dataset.txt --split_val allo_test_split.txt --confidence_cutoff -4 --pretrain_ckpt best_ema_inference_epoch_model --pretrain_dir allo_only_score_model/allo-only --filtering_ckpt best_model_epoch75.pt --filtering_model_dir workdir/v1.1/confidence_model --max_complexes_per_couple 20 --cb_cluster "Allosteric Kinase Inhibitors" --initial_iterations 1 --minimum_t 0 --cache_path data/cache --inference_batch_size 4 --save_model_freq 25 --inference_iterations 1 --buffer_sampling_alpha 2 --buffer_sampling_beta 1 --wandb --project diffdock-tune --run_name cb_test --num_inference_complexes 10 --chain_cutoff 10
